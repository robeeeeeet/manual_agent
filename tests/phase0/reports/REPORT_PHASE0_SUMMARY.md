# Phase 0: フィジビリティ確認 総合レポート

## 判定結果

# ✅ Go

**3つのコアAI機能すべてが100%の成功率を達成。本開発に進むことを推奨。**

---

## 検証サマリー

| Phase | 検証内容 | 成功率 | 判定 |
|-------|----------|--------|------|
| 0-1 | 画像からメーカー・型番読み取り | **100%** (4/4) | ✅ Go |
| 0-2 | メーカー・型番からマニュアルPDF取得 | **100%** (4/4) | ✅ Go |
| 0-3 | マニュアルからメンテナンス項目抽出 | **100%** (4/4) | ✅ Go |

---

## 各Phaseの詳細

### Phase 0-1: 画像からメーカー・型番読み取り

| 項目 | 結果 |
|------|------|
| 使用モデル | Gemini 2.0 Flash |
| テスト製品 | 4製品（オーブンレンジ、電気ポット、炊飯器、トースター） |
| 成功率 | 100% |

**確認できた機能:**
- 型番ラベルからの正確な読み取り
- 外観からの製品推測（ラベルが見えない場合）
- ラベル位置の指示機能

### Phase 0-2: メーカー・型番からマニュアルPDF取得

| 項目 | 結果 |
|------|------|
| 使用技術 | Google Custom Search JSON API + Gemini 2.5 Flash |
| 推奨実装 | Custom Search API（`filetype:pdf`直接検索） |
| 成功率 | 100% |

**確認できた機能:**
- `filetype:pdf site:{ドメイン}` による直接PDF検索
- スニペット判断 + 必要時LLM検証
- LLMによる再帰的階層探索（最大深度3）
- サイト固有コードなしで新規メーカーにも対応可能

### Phase 0-3: マニュアルからメンテナンス項目抽出

| 項目 | 結果 |
|------|------|
| 使用モデル | Gemini 2.5 Flash |
| テストPDF | 4製品（合計33MB） |
| 抽出項目数 | 70件 |
| 成功率 | 100% |

**抽出される情報:**
- 項目名・詳細説明
- 周期（使用後毎回、週1回、月1回など）
- 重要度（high/medium/low）
- ページ参照（元マニュアルの参照ページ）

---

## コスト見積もり（1製品あたり）

### 使用モデル: Gemini 2.5 Flash（現在の実装）

| Phase | LLM呼び出し回数 | 費用 |
|-------|----------------|------|
| 0-1 画像認識 | 1回 | $0.0005 |
| 0-2 PDF取得 | 3回（平均） | $0.006 |
| 0-3 メンテナンス抽出 | 1回 | $0.015 |
| **合計** | **5回** | **約$0.02/製品（約3円）** |

### 規模別コスト

| 製品数 | 費用 |
|--------|------|
| 10製品 | 約30円 |
| 100製品 | 約300円 |
| 1,000製品 | 約3,000円 |

※ Gemini無料枠の範囲内で開発・テスト可能

---

## 技術スタック確定

| 用途 | 技術 |
|------|------|
| 画像認識 | Gemini 2.0/2.5 Flash |
| Web検索 | Google Custom Search JSON API |
| PDF解析 | Gemini Files API |
| Pythonパッケージ | google-genai, requests |

---

## 本開発時の推奨事項

### 1. フォールバック機能

| シナリオ | 対応策 |
|----------|--------|
| 画像認識失敗 | 手動入力フォーム |
| PDF自動取得失敗 | 手動アップロード |
| メンテナンス抽出失敗 | 再試行 or 手動入力 |

### 2. キャッシュ戦略

- 同一型番の再検索を避けるためPDF URLをキャッシュ
- 抽出済みメンテナンス項目をDBに保存
- 同一製品の登録時は既存データを再利用

### 3. 精度向上

- ユーザーフィードバックによる抽出結果の修正機能
- 抽出結果の確認画面で編集可能に
- 修正データを学習に活用（将来的）

---

## リスクと対策

| リスク | 影響 | 対策 |
|--------|------|------|
| Gemini API料金変更 | コスト増 | Flash-Liteへの切り替え検討 |
| メーカーサイト構造変更 | PDF取得失敗 | LLMベース実装で自動対応 |
| 大容量PDF（>20MB） | 処理時間増 | タイムアウト設定・分割処理 |
| 抽出精度の低下 | 不正確なリマインド | ユーザー確認ステップ |

---

## 次のステップ: Phase 1 基盤構築

Phase 0の検証が完了したため、本開発を開始します。

### Phase 1 タスク

1. Next.jsプロジェクトセットアップ
2. Supabase設定（DB/Auth）
3. 基本的なUI/レイアウト（3画面）
4. Gemini API連携の実装

---

## 成果物一覧

### レポート（`reports/`）

- `REPORT_PHASE0-1.md` - 画像認識検証レポート
- `REPORT_PHASE0-2.md` - PDF取得検証レポート
- `REPORT_PHASE0-3.md` - メンテナンス抽出検証レポート
- `REPORT_PHASE0_SUMMARY.md` - 本レポート

### スクリプト（`scripts/`）

| ファイル | 用途 |
|----------|------|
| `test_image_recognition.py` | 画像認識テスト |
| `test_custom_search_api.py` | Custom Search API版PDF取得（推奨） |
| `test_maintenance_extraction.py` | メンテナンス項目抽出 |
| `download_test_pdfs.py` | テストPDFダウンロード |

### アーカイブ（`archive/` - gitignore）

過去バージョンのスクリプト（開発経緯の記録）

### データ（gitignore）

- `test_pdfs/` - テスト用PDFファイル
- `test_images/` - テスト用画像ファイル
- `results/` - 抽出結果JSON

---

## 結論

**Phase 0フィジビリティ確認の結果、3つのコアAI機能すべてが実用レベルで動作することを確認しました。**

- 画像認識: Geminiの高い画像解析能力により、型番ラベルの読み取りが高精度
- PDF取得: LLMベースの再帰探索により、サイト固有コードなしで汎用的に対応
- メンテナンス抽出: PDFを直接解析し、周期・重要度まで含めた詳細情報を抽出

**本開発への移行を推奨します。**
