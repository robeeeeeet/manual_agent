# モバイルUI全面改善プラン

## 目的
スマホアプリ（PWA）としての利用をメインに想定し、全画面のデザイン・ユーザビリティ・レイアウトを改善する。

## 確認対象ページ一覧（優先度順）

### 🔴 優先度：高（メイン導線）
| # | ページ | URL | 確認ポイント |
|---|--------|-----|-------------|
| 1 | **ホーム** | `/` | ファーストビュー、CTA配置、情報密度 |
| 2 | **家電一覧** | `/appliances` | カード表示、タップ領域、スクロール |
| 3 | **家電詳細** | `/appliances/[id]` | 複雑なUI、QAチャット、メンテナンス表示 |
| 4 | **家電登録** | `/register` | 多段階フロー、画像アップロード、入力フォーム |
| 5 | **メンテナンス一覧** | `/maintenance` | タブUI、フィルタ、リスト表示 |

### 🟡 優先度：中（サブ機能）
| # | ページ | URL | 確認ポイント |
|---|--------|-----|-------------|
| 6 | **マイページ** | `/mypage` | 設定項目、統計表示、通知設定 |
| 7 | **グループ管理** | `/groups` | 作成・参加フロー、メンバー表示 |
| 8 | **グループ詳細** | `/groups/[id]` | メンバー一覧、共有家電リスト |

### 🟢 優先度：低（認証・補助）
| # | ページ | URL | 確認ポイント |
|---|--------|-----|-------------|
| 9 | **ログイン** | `/login` | フォームレイアウト、エラー表示 |
| 10 | **新規登録** | `/signup` | OTPコード入力、確認フロー |
| 11 | **パスワードリセット** | `/reset-password` | フォーム、案内文言 |
| 12 | **ヘルプ** | `/help` | アコーディオン、可読性 |

### 🔵 共通要素
| 要素 | 確認ポイント |
|-----|-------------|
| **Header** | ロゴ見切れ、ハンバーガーメニュー、タップ領域 |
| **Footer** | 必要性、ナビゲーション追加検討 |
| **モーダル** | フルスクリーン対応、閉じるボタン位置 |
| **通知許可UI** | オンボーディングフロー |

---

## 確認方法

1. **Playwright MCP** でモバイルサイズ（375x812 = iPhone X相当）でスナップショット取得
2. 各ページの問題点を洗い出し
3. 改善方針をまとめる

---

## 現在のステータス

- [x] ページ構成調査完了
- [x] サーバー起動
- [x] 各ページのモバイル表示確認
- [x] 問題点リストアップ
- [x] 改善方針決定
- [x] **デザイン比較フェーズ完了**
- [x] **ハイブリッドデザイン選択**
- [ ] 全ページへのハイブリッドデザイン適用

## 実施方針（ユーザー選択）

- **実施範囲**: 全13件の修正を一度に実施
- **タブUI**: ラベル短縮方式（「すべて」「超過」「今週」「予定」「手動」）
- **デザイン方向性**: **ハイブリッド（B案の色味 + C案の形状）**
- **カラー**: iOS System Colors（#007AFF, #34C759, #FF9500）
- **ボトムナビ**: 追加する

## 🔬 デザイン比較フェーズ ✅ 完了

### 比較した3案

| 案 | コンセプト | 特徴 | スクリーンショット |
|----|----------|------|-------------------|
| **A案** | ソフト＆パステル | ミントグリーン、丸み強め、優しい印象 | `design-A-guest.png` |
| **B案** | ネイティブ風iOS | SF風シンプル、グラスモーフィズム、洗練 | `design-B-ios.png` |
| **C案** | マテリアルYou | 動的カラー、カード中心、Android風 | `design-C-material.png` |

### ✅ 選択結果: ハイブリッドデザイン

ユーザーの選択に基づき、B案とC案の良い部分を組み合わせたハイブリッドデザインを採用：

| 要素 | 採用元 | 詳細 |
|-----|-------|------|
| **カラー** | B案 | iOS System Colors（Blue #007AFF, Green #34C759, Orange #FF9500） |
| **アイコン形状** | C案 | `rounded-full`（丸いアイコン） |
| **クイックアクション** | C案 | 3カラムレイアウト |
| **リスト表示** | B案 | iOS風リスト（シェブロン付き） |
| **ヘッダー** | B案 | シンプルに「ホーム」のみ（挨拶・アプリ名なし） |

---

## 🎨 ハイブリッドデザイン仕様

### コンセプト: 「洗練されたiOS風 × Material 3の使いやすさ」

iOSの洗練されたカラーリングと、Material 3の直感的なインタラクションパターンを融合。

### カラースキーム（iOS System Colors）

```css
:root {
  /* プライマリ: iOS Blue */
  --ios-blue: #007AFF;
  --ios-blue-light: rgba(0, 122, 255, 0.1);
  --ios-blue-hover: rgba(0, 122, 255, 0.2);

  /* セカンダリ: iOS Green */
  --ios-green: #34C759;
  --ios-green-light: rgba(52, 199, 89, 0.1);

  /* アクセント: iOS Orange */
  --ios-orange: #FF9500;
  --ios-orange-light: rgba(255, 149, 0, 0.1);

  /* ステータス */
  --ios-red: #FF3B30;    /* 危険・期限超過 */
  --ios-yellow: #FFCC00; /* 警告 */
  --ios-gray: #8E8E93;   /* 非アクティブ */

  /* ニュートラル（iOS風） */
  --gray-50: #F2F2F7;
  --gray-100: #E5E5EA;
  --gray-200: #D1D1D6;
  --gray-500: #8E8E93;
  --gray-900: #1C1C1E;
}
```

### UIコンポーネント仕様

| 要素 | 仕様 | 採用元 |
|-----|------|-------|
| **アイコン背景** | `rounded-full`（完全な円形） | C案 |
| **カード角丸** | `rounded-xl`（12px）または `rounded-2xl`（16px） | B案 |
| **リスト項目** | 白背景 + divider + シェブロン矢印 | B案 |
| **ボタン** | 背景色付き + `rounded-full` または `rounded-xl` | C案 |
| **タップ領域** | 最小44px × 44px | 共通 |
| **シャドウ** | `shadow-sm`（控えめ、iOS風） | B案 |

### レイアウトパターン

#### ホーム（実装済み）
```
┌─────────────────────────┐
│ ホーム            ≡    │  ← シンプルヘッダー (B案)
├─────────────────────────┤
│  [追加]  [メンテ] [一覧] │  ← 3列クイックアクション (C案)
│   🔵      🟠      🟢    │     丸いアイコン (C案)
├─────────────────────────┤
│ 登録済み家電             │
│ ┌─────────────────────┐ │
│ │ 🔵 洗濯機    >      │ │  ← iOS風リスト (B案)
│ │    Panasonic        │ │
│ ├─────────────────────┤ │
│ │ 🔵 エアコン  >      │ │
│ │    Daikin           │ │
│ └─────────────────────┘ │
└─────────────────────────┘
```

#### 家電一覧
```
┌─────────────────────────┐
│ ← 家電一覧              │
├─────────────────────────┤
│ ┌─────────────────────┐ │
│ │ 🔵 洗濯機    >      │ │  ← iOS風リスト
│ │    Panasonic        │ │
│ │    次回: 3日後      │ │
│ ├─────────────────────┤ │
│ │ 🟠 エアコン  >      │ │  ← 期限超過は色変更
│ │    Daikin           │ │
│ │    ⚠️ 期限超過       │ │
│ └─────────────────────┘ │
│                    [+]  │  ← FAB（丸ボタン）
└─────────────────────────┘
```

#### メンテナンス一覧
```
┌─────────────────────────┐
│ メンテナンス             │
├─────────────────────────┤
│ [すべて][超過][今週][予定]│  ← 短縮タブ
├─────────────────────────┤
│ ┌─────────────────────┐ │
│ │ 🔴 フィルター清掃   │ │  ← 緊急度カラー
│ │    エアコン | 期限超過│ │
│ │           [完了] ✓  │ │  ← 大きなボタン
│ ├─────────────────────┤ │
│ │ 🟡 洗濯槽クリーナー │ │
│ │    洗濯機 | 今週     │ │
│ └─────────────────────┘ │
└─────────────────────────┘
```

### モバイルアプリらしい要素

1. **ボトムナビゲーション追加**
   - ホーム / 家電 / メンテナンス / マイページ の4タブ
   - iOS風アイコン（塗りつぶし/アウトライン切り替え）
   - 現在のハンバーガーメニューは補助的に残す

2. **フローティングアクションボタン（FAB）**
   - 「+」アイコンの丸ボタン（iOS Blue）
   - 家電一覧・メンテナンス一覧に配置

3. **iOS風インタラクション**
   - リスト項目: `hover:bg-gray-50`, `active:bg-gray-100`
   - ボタン: `transition-colors` で滑らかな変化
   - カード: 軽いシャドウでフラットに

4. **ステータス表示の色分け**
   - 期限超過: iOS Red `#FF3B30`
   - 今週: iOS Orange `#FF9500`
   - 予定通り: iOS Green `#34C759`
   - 手動: iOS Gray `#8E8E93`

---

## 発見した問題点

### 🔴 重大（レイアウト崩れ・UX阻害）

| # | ページ | 問題 | 詳細 |
|---|--------|------|------|
| 1 | **メンテナンス一覧** | タブ見切れ | 「予定通り」「手動」タブが画面外で気づけない |
| 2 | **家電一覧** | ボタン折り返し | 「家電を追加」ボタンが2行に折れてダサい |
| 3 | **ホーム** | カードレイアウト崩れ | 登録済み家電カードでカテゴリバッジと説明書リンクの配置が不自然 |
| 4 | **ヘルプ** | 絵文字表示不可 | 一部の絵文字が□□で表示される |

### 🟡 中程度（デザイン・視認性）

| # | ページ/要素 | 問題 | 詳細 |
|---|------------|------|------|
| 5 | **Header** | 上部青ライン | 全ページでHeaderの上に青いボーダーラインが表示 |
| 6 | **家電詳細** | アイコン小さい | メンテ項目の「アーカイブ」「削除」アイコンが何か分からない |
| 7 | **家電一覧** | 情報過多 | カード内の情報量が多く詰め込み感（登録者名、日付、バッジ等） |
| 8 | **ハンバーガーメニュー** | オーバーレイなし | メニュー展開時に背景が暗くならず、境界が曖昧 |
| 9 | **家電登録** | ステップ名見切れ | プログレスバーのステップラベルが途切れている |
| 10 | **グループ** | 配置不自然 | グループ名長いと折返し、「ホームに戻る」リンクが唐突 |

### 🟢 軽微（改善推奨）

| # | ページ/要素 | 問題 | 詳細 |
|---|------------|------|------|
| 11 | **共通** | タップ領域 | 一部ボタン・リンクのタップ領域が小さい |
| 12 | **マイページ** | 通知セクション | 未対応ブラウザへの案内が大きすぎる |
| 13 | **家電詳細** | 削除ボタン目立ちすぎ | 赤いアウトラインで危険アクションが目立ちすぎ |

---

## 実装計画

### Phase 1: 基盤整備

#### 1.1 globals.css のカラー変数更新
- **ファイル**: `frontend/src/app/globals.css`
- **対応**: iOS System Colors に変更
- **詳細**: 既存のミントグリーン変数を削除し、iOS カラーに統一

#### 1.2 BottomNav コンポーネント作成
- **ファイル**: `frontend/src/components/layout/BottomNav.tsx` (新規)
- **対応**: 4タブのボトムナビゲーション（ホーム/家電/メンテナンス/マイページ）
- **仕様**:
  - iOS風アイコン（現在ページは塗りつぶし、他はアウトライン）
  - 高さ: 安全領域含めて約80px
  - Safe Area 対応（`pb-safe`）

#### 1.3 layout.tsx の更新
- **ファイル**: `frontend/src/app/layout.tsx`
- **対応**: BottomNav を追加、メインコンテンツに `pb-20` を追加

### Phase 2: ホーム画面（✅ 実装済み、微調整のみ）

- **ファイル**: `frontend/src/app/page.tsx`
- **対応**: ハイブリッドデザイン実装済み
- **微調整**:
  - カラー変数を CSS 変数参照に変更
  - BottomNav との連携確認

### Phase 3: 家電一覧

- **ファイル**: `frontend/src/app/appliances/page.tsx`
- **対応**:
  - iOS風リスト表示に変更（ホームと同じパターン）
  - 「家電を追加」ボタン → FAB（右下の丸ボタン）に変更
  - 情報整理: 登録日削除、メンテナンス状況をバッジ表示
- **レイアウト**:
  ```
  [丸アイコン] [家電名・メーカー] [状況バッジ] [>]
  ```

### Phase 4: メンテナンス一覧

- **ファイル**: `frontend/src/app/maintenance/page.tsx`
- **対応**:
  - タブラベル短縮（「すべて」「超過」「今週」「予定」「手動」）
  - iOS カラーでステータス色分け
  - 完了ボタンを大きく（min 44px）
  - FAB は不要（既にリストUIで完結）

### Phase 5: 家電詳細

- **ファイル**: `frontend/src/app/appliances/[id]/page.tsx`
- **対応**:
  - ヘッダーにシンプルな戻るボタン
  - メンテナンス項目をiOS風リストに
  - アーカイブ・削除ボタンを「︙」メニューに統合
  - QAチャットのスタイル調整

### Phase 6: 家電登録

- **ファイル**: `frontend/src/app/register/page.tsx`
- **対応**:
  - ステッププログレス: モバイルでは番号のみ表示
  - フォームをカード内に配置
  - ボタンを iOS Blue に統一

### Phase 7: その他ページ

#### マイページ
- **ファイル**: `frontend/src/app/mypage/page.tsx`
- **対応**: iOS風セクションリストに変更、通知セクションをコンパクト化

#### グループ管理
- **ファイル**: `frontend/src/app/groups/page.tsx`, `frontend/src/app/groups/[id]/page.tsx`
- **対応**: 「ホームに戻る」削除、iOS風リスト表示

#### ヘルプ
- **ファイル**: `frontend/src/app/help/page.tsx`
- **対応**: 絵文字をLucideアイコンに置き換え

### Phase 8: 共通要素の改善

#### Header
- **ファイル**: `frontend/src/components/layout/Header.tsx`
- **対応**:
  - 青ライン削除
  - ハンバーガーメニュー展開時にオーバーレイ追加
  - モバイルでは簡素化

### Phase 9: 軽微な改善

- タップ領域の最小サイズを44px×44pxに統一
- 削除ボタンのスタイル調整（目立ちすぎないよう）
- トランジション・アニメーションの統一

---

## 修正対象ファイル一覧

### 新規作成

| ファイル | 内容 |
|---------|------|
| `frontend/src/components/layout/BottomNav.tsx` | **新規** iOS風ボトムナビゲーション（4タブ） |

### 既存ファイル修正

| ファイル | 修正内容 | Phase |
|---------|---------|-------|
| `frontend/src/app/globals.css` | iOS カラースキームに変更 | 1 |
| `frontend/src/app/layout.tsx` | BottomNav追加、`pb-20` | 1 |
| `frontend/src/app/page.tsx` | ✅ 実装済み（微調整のみ） | 2 |
| `frontend/src/app/appliances/page.tsx` | iOS風リスト、FAB追加 | 3 |
| `frontend/src/app/maintenance/page.tsx` | タブ短縮、iOS色分け | 4 |
| `frontend/src/app/appliances/[id]/page.tsx` | iOS風UI、メニュー統合 | 5 |
| `frontend/src/app/register/page.tsx` | ステップ番号のみ、iOS Blue | 6 |
| `frontend/src/app/mypage/page.tsx` | iOS風セクションリスト | 7 |
| `frontend/src/app/groups/page.tsx` | iOS風リスト、不要リンク削除 | 7 |
| `frontend/src/app/groups/[id]/page.tsx` | iOS風リスト | 7 |
| `frontend/src/app/help/page.tsx` | 絵文字→Lucideアイコン | 7 |
| `frontend/src/components/layout/Header.tsx` | 青ライン削除、オーバーレイ | 8 |

---

## 検証方法

1. **開発サーバー起動**: `cd frontend && npm run dev`
2. **Playwright MCP** でモバイルサイズ（375x812）で各ページ確認
3. 各ページについて Before/After スクリーンショット比較

### 検証チェックリスト

| ページ | 確認項目 |
|--------|---------|
| `/` | 3列クイックアクション、iOS風リスト、シンプルヘッダー |
| `/appliances` | iOS風リスト、FAB、情報整理 |
| `/appliances/[id]` | 戻るボタン、メニュー統合、QA調整 |
| `/maintenance` | タブ全表示、色分け、完了ボタンサイズ |
| `/register` | ステップ番号のみ、フォームカード |
| `/mypage` | セクションリスト、通知コンパクト |
| `/groups` | 不要リンク削除、iOS風表示 |
| `/help` | アイコン表示（絵文字なし） |
| **共通** | BottomNav表示、Header簡素化、オーバーレイ |

---

## 参考スクリーンショット

デザイン比較時に撮影したスクリーンショット：

| ファイル | 内容 |
|---------|------|
| `.playwright-mcp/design-A-guest.png` | A案（ソフト＆パステル） |
| `.playwright-mcp/design-B-ios.png` | B案（iOS風） |
| `.playwright-mcp/design-C-material.png` | C案（Material You） |

**採用**: B案の色味 + C案の形状 = ハイブリッドデザイン
